<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A "glassbox" pipeline wrapper for eyeris — glassbox • eyeris</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A " glassbox pipeline wrapper for eyeris><meta name="description" content='This glassbox function (in contrast to a "blackbox" function where you run
it and get a result but have no (or little) idea as to how you got from input
to output) has a few primary benefits over calling each exported function
from eyeris separately.'><meta property="og:description" content='This glassbox function (in contrast to a "blackbox" function where you run
it and get a result but have no (or little) idea as to how you got from input
to output) has a few primary benefits over calling each exported function
from eyeris separately.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eyeris</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>template</h6></li>
    <li><a class="dropdown-item" href="../articles/preproc-workflow.html">preproc-workflow</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="dropdown-item" href="../news/index.html#eyeris-0109000">Version 0.1.0.9000</a></li>
    <li><a class="dropdown-item" href="../news/index.html#eyeris-0009000">Version 0.0.0.9000</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/shawntz/eyeris/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>A "glassbox" pipeline wrapper for <code>eyeris</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/shawntz/eyeris/blob/dev/R/glassbox.R" class="external-link"><code>R/glassbox.R</code></a></small>
      <div class="d-none name"><code>glassbox.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This <code>glassbox</code> function (in contrast to a "blackbox" function where you run
it and get a result but have no (or little) idea as to how you got from input
to output) has a few primary benefits over calling each exported function
from <code>eyeris</code> separately.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">glassbox</span><span class="op">(</span></span>
<span>  <span class="va">file</span>,</span>
<span>  confirm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  detrend_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  num_previews <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  preview_duration <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  preview_window <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>An SR Research EyeLink <code>.asc</code> file generated by the official
EyeLink <code>edf2asc</code> command.</p></dd>


<dt id="arg-confirm">confirm<a class="anchor" aria-label="anchor" href="#arg-confirm"></a></dt>
<dd><p>A flag to indicate whether to run the <code>glassbox</code> pipeline
autonomously all the way through (set to <code>FALSE</code> by default), or to
interactively provide a visualization after each pipeline step, where you
must also indicate "(y)es" or "(n)o" to either proceed or cancel the
current <code>glassbox</code> pipeline operation (set to <code>TRUE</code>).</p></dd>


<dt id="arg-detrend-data">detrend_data<a class="anchor" aria-label="anchor" href="#arg-detrend-data"></a></dt>
<dd><p>A flag to indicate whether to run the <code>detrend</code> step (set
to <code>FALSE</code> by default). Detrending your pupil timeseries can have unintended
consequences; we thus recommend that users understand the implications of
detrending – in addition to whether detrending is appropriate for the
research design and question(s) – before using this function.</p></dd>


<dt id="arg-num-previews">num_previews<a class="anchor" aria-label="anchor" href="#arg-num-previews"></a></dt>
<dd><p>Number of random example "epochs" to generate for
previewing the effect of each preprocessing step on the pupil timeseries.</p></dd>


<dt id="arg-preview-duration">preview_duration<a class="anchor" aria-label="anchor" href="#arg-preview-duration"></a></dt>
<dd><p>Time in seconds of each randomly selected preview.</p></dd>


<dt id="arg-preview-window">preview_window<a class="anchor" aria-label="anchor" href="#arg-preview-window"></a></dt>
<dd><p>The start and stop raw timestamps used to subset the
preprocessed data from each step of the <code>eyeris</code> workflow for visualization.
Defaults to NULL, meaning random epochs as defined by <code>num_previews</code> and
<code>preview_duration</code> will be plotted. To override the random epochs, set
<code>preview_window</code> here to a vector with relative start and stop times
(e.g., <code>c(5000, 6000)</code> to indicate the raw data from 5-6 seconds on data that
were recorded at 1000 Hz). Note, the start/stop time values indicated here
relate to the raw index position of each pupil sample from 1 to n (which
will need to be specified manually by the user depending on the sampling rate
of the recording; i.e., 5000-6000 for the epoch positioned from 5-6 seconds
after the start of the timeseries, sampled at 1000 Hz).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to override the default, prescribed settings.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>First, this <code>glassbox</code> function provides a highly opinionated prescription of
steps and starting parameters we believe any pupillometry researcher should
use as their defaults when preprocessing pupillometry data.</p>
<p>Second, and not mutually exclusive from the first point, using this function
should ideally reduce the probability of accidental mishaps when
"reimplementing" the steps from the preprocessing pipeline both within and
across projects. We hope to streamline the process in such a way that you
could collect a pupillometry dataset and within a few minutes assess the
quality of those data while simultaneously running a full preprocessing
pipeline in 1-ish line of code!</p>
<p>Third, <code>glassbox</code> provides an "interactive" framework where you can evaluate
the consequences of the parameters within each step on your data in real
time, facilitating a fairly easy-to-use workflow for parameter optimization
on your particular dataset. This process essentially takes each of the
opinionated steps and provides a pre-/post-plot of the timeseries data for
each step so you can adjust parameters and re-run the pipeline until you are
satisfied with the choices of your paramters and their consequences on your
pupil timeseries data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">demo_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"memory.asc"</span>, package <span class="op">=</span> <span class="st">"eyeris"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (1) examples using the default prescribed parameters and pipeline recipe</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## (a) run an automated pipeline with no real-time inspection of parameters</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">eyeris</span><span class="fu">::</span><span class="fu">glassbox</span><span class="op">(</span><span class="va">demo_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::load_asc()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::deblink()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::detransient()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::interpolate()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::lpfilt()</span>
<span class="r-plt img"><img src="glassbox-1.png" alt="" width="700" height="433"></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Skipping eyeris::detrend()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::zscore()</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">output</span>,</span></span>
<span class="r-in"><span>  steps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  preview_window <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">output</span><span class="op">$</span><span class="va">timeseries</span><span class="op">$</span><span class="va">block_1</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Plotting block 1 from possible blocks: 1</span>
<span class="r-plt img"><img src="glassbox-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-3.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-4.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## (b) run a interactive workflow (with confirmation prompts after each step)</span></span></span>
<span class="r-in"><span><span class="co"># output &lt;- eyeris::glassbox(demo_data, confirm = TRUE, seed = 0)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (2) examples overriding the default parameters</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu">eyeris</span><span class="fu">::</span><span class="fu">glassbox</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">demo_data</span>,</span></span>
<span class="r-in"><span>  confirm <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># TRUE if you want to visualize each step in real-time</span></span></span>
<span class="r-in"><span>  deblink <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>extend <span class="op">=</span> <span class="fl">40</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  lpfilt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>plot_freqz <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::load_asc()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::deblink()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::detransient()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::interpolate()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::lpfilt()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Skipping eyeris::detrend()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> [  OK  ] - Running eyeris::zscore()</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">output</span>, seed <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Plotting block 1 from possible blocks: 1</span>
<span class="r-plt img"><img src="glassbox-6.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-7.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-8.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-9.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-10.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-11.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-12.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-13.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-14.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-15.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-16.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="glassbox-17.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Made with ♥ in Palo Alto, CA by <a href="http://shawnschwartz.com" class="external-link">Shawn Schwartz</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

